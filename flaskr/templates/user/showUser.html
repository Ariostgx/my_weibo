{% extends 'base.html' %}

{% block header %}
  <h1>
      {% block title %} {{ user['username']}}'s Home{% endblock %}
      <div class="about">start blog from {{ user['dated'].strftime('%Y-%m-%d') }}</div>
  </h1>

    {% if g.user['id'] != user['id'] and not is_follower %}
          <a class="action" href="{{ url_for('user.follow_user', user_id=g.user['id'], leader_id=user['id']) }}">Follow</a>
    {% elif g.user['id'] != user['id'] %}
         <a class="action" href="{{ url_for('user.unfollow_user', user_id=g.user['id'], leader_id=user['id']) }}">UnFollow</a>
    {% elif g.user['id'] == user['id'] %}
        <a class="action" href="{{ url_for('user.update', user_id=g.user['id'])}}">Edit Yourself</a>
    {% endif %}

    <a class="action" href="{{ url_for('user.show_followers', user_id=user['id']) }}">Who follow him/her</a>
    <a class="action" href="{{ url_for('user.show_leaders', user_id=user['id']) }}">Who lead him/her</a>


{% endblock %}

{% block content %}
  {% for blog in blogs %}
    <article class="post">
      <header>
        <div>
        {% if blog['fork_time'] %}
          <h1>[FORK!]</h1>
            <div class="about">Fork on {{ blog['fork_time'].strftime('%Y-%m-%d') }}
               from <a class="action" href="{{ url_for('user.show_user', user_id=blog['author_id']) }}">{{ post['username'] }}</a>
            </div>
        {% else %}
            <h1>[Origin]</h1>
            <div class="about">created on {{ blog['dated'].strftime('%Y-%m-%d') }}</div>
        {% endif %}

        </div>
        {% if g.user['id'] == blog['author_id'] %}
          <a class="action" href="{{ url_for('blog.update', id=blog['id']) }}">Edit</a>
        {% endif %}
      </header>
      <p class="body">{{ blog['context'] }}</p>

    </article>
      {% if blog['fork_time'] %}
        <a class="action" href="{{ url_for('fork.show_fork', user_id=user['id'], blog_id=blog['id']) }}">See more</a>
      {% else %}
         <a class="action" href="{{ url_for('blog.show_blog', blog_id=blog['id']) }}">See more</a>
      {% endif %}

      {% if not loop.last %}
      <hr>
    {% endif %}
  {% endfor %}
{% endblock %}